# 채팅방 관리자 시스템 가이드

## 📊 권한 체계

### 역할 구분

| 역할 | 권한 | 인원 제한 |
|------|------|-----------|
| **Owner (방장)** | 모든 권한 | 1명 (필수) |
| **Admin (부방장)** | 추방, 신고 처리, 모더레이터 지정 | 참여자 수에 따라 |
| **Moderator (모더레이터)** | 추방, 신고 처리 | 참여자 수에 따라 |
| **Member (일반 멤버)** | 채팅 참여, 신고 | 제한 없음 |

## 👥 부방장 인원 제한

### ✅ 추천: 비율제 (참여자 100명당 부방장 1명)

| 참여자 수 | 부방장 + 모더레이터 | 총 관리자 | 비율 |
|-----------|---------------------|-----------|------|
| **1-100명** | 최소 3명 | 4명 (방장 1 + 부방장 3) | ~3% |
| **100-200명** | 3명 | 4명 (방장 1 + 부방장 3) | ~1.5% |
| **200-300명** | 4명 | 5명 (방장 1 + 부방장 4) | ~1.3% |
| **500-1000명** | 5-7명 | 6-8명 | ~1% |
| **1000명+** | 최대 10명 | 11명 (방장 1 + 부방장 10) | ~1% |

**규칙**: `참여자 ÷ 100` (최소 3명, 최대 10명)

### 다른 서비스 비교

- **카카오톡 오픈채팅**: 방장 1명 + 부방장 최대 3명
- **Discord**: 서버 규모에 따라 여러 명 (약 1-5%)
- **LINE 오픈채팅**: 제한 없음 (활발한 서버는 많음)
- **Reddit**: 서브레딧별로 다름

## 🎯 권장 사항

### 작은 방 (< 50명)
- 방장 1명 + 부방장 1-2명
- 이유: 작은 그룹에서는 방장이 충분히 관리 가능

### 중간 방 (50-200명)
- 방장 1명 + 부방장 2-3명
- 이유: 시간대별 활동 관리, 부적절한 내용 신속 대응

### 큰 방 (200-1000명)
- 방장 1명 + 부방장 5-7명
- 이유: 다양한 시간대 커버, 급증하는 메시지 관리

### 초대형 방 (1000명+)
- 방장 1명 + 부방장 10명
- 이유: 24시간 모니터링 필요, 동시 다발적 문제 대응

## 💡 관리 팁

### 부방장 선정 기준
1. 활동성: 자주 채팅방에 방문하는 사람
2. 리더십: 의견 조율 능력
3. 신뢰도: 공정하고 신중한 판단
4. 언어 능력: 한국어와 스페인어 모두 가능하면 우대

### 역할 분담 예시
- **부방장 (Admin)**: 중대한 결정, 신고 처리
- **모더레이터 (Moderator)**: 일상적인 모니터링, 간단한 추방

## 🔧 설정 방법

### 1. SQL 실행
```sql
-- Supabase SQL Editor에서 실행
-- 1. database/add-chat-admin-system.sql
-- 2. database/add-admin-limit-system.sql
```

### 2. 방장이 부방장 지정
```
방장 → 설정 버튼 → 참여자 관리 → 부방장 지정
```

### 3. 자동 제한 확인
- 부방장 수가 제한을 초과하면 자동으로 에러 발생
- 방장은 현재 관리 상태를 뷰로 확인 가능

## 📈 성장 단계별 관리

### 단계 1: 시작 (0-50명)
- 최소 관리: 방장 1명만
- 초대형 방: 부방장 1-2명 추가

### 단계 2: 성장 (50-200명)
- 구조화: 부방장 2-3명 체계화
- 모더레이터 도입 고려

### 단계 3: 안정 (200-1000명)
- 충분한 관리자: 부방장 5-7명
- 역할 분담 명확화

### 단계 4: 성숙 (1000명+)
- 전문적 관리: 부방장 10명
- 자동화 도구 도입 (신고 자동 처리 등)

## ⚠️ 주의사항

1. **부방장 남용 금지**: 너무 많이 지정하면 혼란 야기
2. **신중한 선정**: 서두르지 말고 충분히 관찰 후 지정
3. **정기적 체크**: 방장은 주기적으로 부방장 활동 확인
4. **권한 회수**: 부적절한 경우 즉시 권한 해제

## 🎊 결론

### ⭐ 최종 추천

**규칙: 참여자 100명당 부방장 1명 (최소 3명, 최대 10명)**

```javascript
부방장 수 = Math.floor(참여자 / 100)
if (부방장 수 < 3) 부방장 수 = 3
if (부방장 수 > 10) 부방장 수 = 10
```

**예시:**
- 50명 → 부방장 3명 (최소 보장)
- 150명 → 부방장 3명
- 250명 → 부방장 4명
- 500명 → 부방장 5명
- 1000명 → 부방장 10명 (최대)

**왜 이렇게?**
- ✅ 유연함: 방 크기에 따라 자동 조정
- ✅ 적정함: 너무 많지도 적지도 않음
- ✅ 실용적: 실제 운영에 적합
- ✅ 안전함: 남용 방지

