# Amiko 웹앱 전체 사용자 이동 경로 트리

## 앱 접속

### 비로그인 사용자
  - 스플래시 화면 (선택적)
    - 홈페이지 (/)
      - Hero 섹션
        - CTA 클릭 → 예약 생성 페이지 (/booking/create)
        - 비디오 CTA 클릭 → 비디오 섹션 스크롤
      - 로그인/회원가입 버튼 클릭
        - 로그인 페이지 (/sign-in)
          - 이메일/비밀번호 입력
          - 로그인 시도
            - 성공 → 메인 앱 (/main?tab=home)
            - 실패 → 에러 메시지 표시
          - 회원가입 링크 클릭 → 회원가입 페이지 (/sign-up)
        - 회원가입 페이지 (/sign-up)
          - 폼 입력 (이메일, 비밀번호, 이름, 생년월일, 전화번호, 국가)
          - SMS 인증
          - 회원가입 제출
            - 성공 → 로그인 페이지로 이동 (/sign-in)
            - 실패 → 에러 메시지 표시

### 로그인 사용자
  - 스플래시 화면 (선택적)
  - 메인 앱 (/main?tab=home)
    - 자동 출석 체크 (포인트 지급)

---

## 메인 탭 네비게이션

### 홈 탭 (/main?tab=home)
  - 이벤트 캐러셀
    - 이벤트 클릭 → 이벤트 탭으로 이동 (/main?tab=event)
  - 공지사항
    - 공지사항 클릭 → 게시글 상세 (/community/post/[id])
  - 인기 게시글
    - 게시글 클릭 → 게시글 상세 (/community/post/[id])
  - 자유게시판 바로가기
    - 클릭 → 커뮤니티 탭 자유게시판 (/main?tab=community&cTab=freeboard)
  - 퀴즈 섹션
    - 퀴즈 클릭 → 퀴즈 상세 또는 시작 페이지
      - 한국어 레벨 테스트 → /quiz/korean-level/start
      - MBTI K-POP → /quiz/mbti-kpop
      - 아이돌 포지션 → /quiz/idol-position
      - 운세 → /quiz/fortune/start
      - 별자리 → /quiz/zodiac/start
      - 기타 퀴즈 → /quiz/[id]
  - 팬아트 갤러리
    - 팬아트 클릭 → 팬아트 상세 (/community/fanart/[id])
    - 더보기 → 팬아트 목록 (/community/fanart)
  - 아이돌짤 갤러리
    - 아이돌짤 클릭 → 아이돌짤 상세 (/community/idol-photos/[id])
    - 더보기 → 아이돌짤 목록 (/community/idol-photos)
  - K-Chat
    - 채팅방 클릭 → 채팅방 입장 (/community/k-chat/[roomId])
    - 더보기 → 채팅방 목록 (/community/k-chat)
  - 투표 게시판
    - 투표 클릭 → 투표 상세 (/community/polls)
  - 한국 뉴스
    - 뉴스 클릭 → 뉴스 상세 (/community/news?id=[id])
    - 더보기 → 뉴스 목록 (/community/news)
  - 스토리
    - 스토리 클릭 → 스토리 뷰어
      - 좋아요
      - 댓글 작성
  - 파트너 찾기
    - 파트너 찾기 클릭 → 파트너 목록 (/community/partners)
  - 만남 탭 이동 버튼
    - 클릭 → 만남 탭 (/main?tab=meet)

### 만남 탭 (/main?tab=meet)
  - 화상채팅 시작
    - 상담사 선택
      - 상담사 클릭 → 상담사 상세
        - 예약하기 → 예약 생성 (/booking/create)
        - 즉시 시작 → 화상채팅 시작 (/call/[meetingId])
    - 예약 목록 조회
      - 예약 클릭 → 예약 상세 (/bookings/[id])
      - 예약 수정 → 예약 수정 (/bookings/[id]/edit)
      - 예약 리뷰 작성 → 리뷰 작성 (/bookings/[id]/review)
  - 내 예약 요청
    - 요청 클릭 → 요청 상세 (/bookings/my-requests/[id])
  - 예약 생성 페이지 (/booking/create)
    - 파트너 선택
    - 날짜 선택
    - 시간 선택
    - 주제 입력
    - 설명 입력
    - 예약 요청 제출
      - 성공 → 예약 대기 상태
      - 실패 → 에러 메시지

### 커뮤니티 탭 (/main?tab=community)
  - 커뮤니티 홈 (currentView: 'home')
    - 스토리 캐러셀
      - 스토리 클릭 → 스토리 상세
        - 좋아요
        - 댓글 작성
    - 갤러리 목록
      - 갤러리 클릭 → 갤러리 상세 (/community/gallery/[slug])
        - 게시글 목록
          - 게시글 클릭 → 게시글 상세 (/community/post/[id])
    - 자유게시판 카드
      - 클릭 → 자유게시판 (currentView: 'freeboard')
    - 뉴스 카드
      - 클릭 → 뉴스 목록 (currentView: 'news')
    - Q&A 카드
      - 클릭 → Q&A 목록 (currentView: 'qa')
    - 퀴즈 카드
      - 클릭 → 퀴즈 목록 (currentView: 'tests')
    - 팬아트 카드
      - 클릭 → 팬아트 목록 (/community/fanart)
    - 아이돌짤 카드
      - 클릭 → 아이돌짤 목록 (/community/idol-photos)
    - K-Chat 카드
      - 클릭 → 채팅방 목록 (/community/k-chat)
    - 투표 카드
      - 클릭 → 투표 목록 (/community/polls)
    - 파트너 찾기 카드
      - 클릭 → 파트너 목록 (/community/partners)

  - 자유게시판 (currentView: 'freeboard')
    - 게시글 목록
      - 게시글 클릭 → 게시글 상세 (/community/post/[id])
        - 게시글 조회
        - 좋아요/싫어요
        - 댓글 작성
          - 댓글 제출
          - 답글 작성
        - 댓글 좋아요/싫어요
        - 댓글 삭제 (본인 작성)
        - 게시글 공유
        - 게시글 삭제 (본인 작성)
        - 게시글 수정 (본인 작성)
      - 게시글 작성 버튼
        - 클릭 → 게시글 작성 모달
          - 제목 입력
          - 내용 입력
          - 이미지 업로드 (최대 5개)
          - 게시글 제출
            - 성공 → 게시글 목록 새로고침
            - 실패 → 에러 메시지
    - 정렬 옵션
      - 최신순
      - 인기순
      - 조회수순
    - 카테고리 필터
      - 공지사항
      - 자유게시판
      - K-POP
      - K-Drama
      - 팬아트
      - 아이돌짤
      - 뷰티
      - 한국어공부
      - 스페인어공부
      - 투표게시판

  - 뉴스 목록 (currentView: 'news')
    - 뉴스 목록 조회
      - 뉴스 클릭 → 뉴스 상세 (/community/news?id=[id])
        - 뉴스 조회
        - 좋아요
        - 댓글 작성
        - 댓글 좋아요/싫어요
        - 댓글 삭제 (본인 작성)

  - Q&A 목록 (currentView: 'qa')
    - 질문 목록 조회
      - 질문 클릭 → 질문 상세 (드로어)
        - 답변 목록 조회
        - 답변 작성
          - 답변 제출
        - 답변 좋아요/싫어요
        - 답변 삭제 (본인 작성)
      - 질문 작성 버튼
        - 클릭 → 질문 작성 모달
          - 제목 입력
          - 카테고리 선택
          - 태그 입력
          - 내용 입력
          - 질문 제출
            - 성공 → 질문 목록 새로고침

  - 퀴즈 목록 (currentView: 'tests')
    - 퀴즈 목록 조회
      - 퀴즈 클릭 → 퀴즈 시작
        - 한국어 레벨 테스트
          - 시작 페이지 (/quiz/korean-level/start)
            - 시작 버튼 → 질문 페이지 (/quiz/korean-level/questions)
              - 질문 1 → 답변 선택
              - 질문 2 → 답변 선택
              - ... (모든 질문 완료)
              - 로딩 페이지 (/quiz/korean-level/loading)
              - 결과 페이지 (/quiz/korean-level/result/[resultId])
                - 결과 조회
                - 재응시 → 시작 페이지로 이동
                - 공유
        - MBTI K-POP 테스트
          - 시작 페이지 (/quiz/mbti-kpop)
            - 시작 버튼 → 질문 페이지 (/quiz/mbti-kpop/questions)
              - 질문 진행
              - 결과 페이지 (/quiz/mbti-kpop/result?mbti=[type])
                - 결과 조회
                - 재응시
                - 공유
        - 아이돌 포지션 테스트
          - 커버 페이지 (/quiz/idol-position/cover)
            - 시작 버튼 → 질문 페이지 (/quiz/idol-position/questions)
              - 질문 진행
              - 결과 페이지 (/quiz/idol-position/result?type=[position])
                - 결과 조회
                - 재응시
                - 공유
        - 운세 테스트
          - 시작 페이지 (/quiz/fortune/start)
            - 시작 버튼 → 질문 페이지 (/quiz/fortune/questions)
              - 질문 진행
              - 로딩 페이지 (/quiz/fortune/loading)
              - 결과 페이지 (/quiz/fortune/result)
                - 결과 조회
                - 재응시
        - 별자리 테스트
          - 시작 페이지 (/quiz/zodiac/start)
            - 시작 버튼 → 질문 페이지 (/quiz/zodiac/questions)
              - 질문 진행
              - 결과 페이지 (/quiz/zodiac/result)
                - 결과 조회
                - 재응시
        - 기타 퀴즈
          - 퀴즈 페이지 (/quiz/[id])
            - 시작 버튼 → 질문 진행
            - 결과 페이지 (/quiz/[id]/result)
              - 결과 조회
              - 재응시

  - 팬아트 목록 (/community/fanart)
    - 팬아트 목록 조회
      - 팬아트 클릭 → 팬아트 상세 (/community/fanart/[id])
        - 팬아트 조회
        - 좋아요
        - 댓글 작성
        - 댓글 좋아요/싫어요
        - 댓글 삭제 (본인 작성)
        - 답글 작성

  - 아이돌짤 목록 (/community/idol-photos)
    - 아이돌짤 목록 조회
      - 아이돌짤 클릭 → 아이돌짤 상세 (/community/idol-photos/[id])
        - 아이돌짤 조회
        - 좋아요
        - 댓글 작성
        - 댓글 좋아요/싫어요
        - 댓글 삭제 (본인 작성)
        - 답글 작성

  - K-Chat (/community/k-chat)
    - 채팅방 목록 조회
      - 채팅방 생성 버튼
        - 클릭 → 채팅방 생성 (/community/k-chat/create)
          - 제목 입력
          - 설명 입력
          - 채팅방 생성
            - 성공 → 채팅방 입장 (/community/k-chat/[roomId])
      - 채팅방 클릭 → 채팅방 입장 (/community/k-chat/[roomId])
        - 메시지 조회
        - 메시지 전송
        - 메시지 좋아요
        - 메시지 삭제 (본인 작성)
        - 참가자 목록 조회
        - 채팅방 나가기

  - 투표 게시판 (/community/polls)
    - 투표 목록 조회
      - 투표 클릭 → 투표 상세
        - 투표 선택
        - 투표 제출
        - 결과 조회

  - 파트너 찾기 (/community/partners)
    - 파트너 목록 조회
      - 파트너 클릭 → 파트너 상세
        - 예약하기 → 예약 생성 (/booking/create)

  - 스토리 목록 (/community/stories)
    - 스토리 목록 조회
      - 스토리 클릭 → 스토리 상세
        - 스토리 조회
        - 좋아요
        - 댓글 작성
        - 댓글 좋아요/싫어요

### 이벤트 탭 (/main?tab=event)
  - 이벤트 목록 조회
    - 이벤트 클릭 → 이벤트 상세
      - 이벤트 조회
      - 참여하기
      - 공유하기
  - 한국 만남 이벤트
    - 클릭 → 이벤트 상세 또는 예약 생성

### 프로필 탭 (/main?tab=me)
  - (비로그인 시) 로그인 페이지로 리다이렉트 (/sign-in)
  - (로그인 시) 프로필 페이지
    - 프로필 정보 조회
      - 포인트 조회
      - 레벨 조회
      - 뱃지 조회
    - 프로필 수정
      - 프로필 이미지 업로드
      - 닉네임 수정
      - 소개 수정
      - 설정 저장
    - 인증센터 이동
      - 클릭 → 인증센터 (/verification-center)
        - 인증 정보 입력
        - SMS 인증
        - 이메일 인증
        - 인증 제출
          - 성공 → 인증 완료 상태 업데이트
    - 내 게시글
      - 게시글 목록 조회
      - 게시글 클릭 → 게시글 상세
      - 게시글 수정
      - 게시글 삭제
    - 내 댓글
      - 댓글 목록 조회
      - 댓글 클릭 → 해당 게시글 상세로 이동
    - 내 예약
      - 예약 목록 조회
      - 예약 상세 조회
      - 예약 수정
      - 예약 취소
    - 포인트 충전 (프로필 탭 내부 서브 기능)
      - 충전 섹션 표시
        - 쿠폰 패키지 선택
        - 결제 페이지 이동 (/payments/checkout)
    - 설정
      - 언어 변경
      - 알림 설정
      - 계정 설정
    - 로그아웃
      - 로그아웃 확인
      - 로그아웃 실행 → 홈페이지로 이동 (/)
    - 계정 삭제
      - 삭제 확인
      - 계정 삭제 실행 → 홈페이지로 이동 (/)

---

## 독립 페이지 (메인 탭 외부)

### 게시글 상세 (/community/post/[id])
  - 게시글 조회
  - 좋아요/싫어요
  - 댓글 작성
    - 댓글 제출
  - 답글 작성
    - 답글 제출
  - 댓글 좋아요/싫어요
  - 댓글 삭제 (본인 작성)
  - 게시글 공유
  - 게시글 수정 (본인 작성)
  - 게시글 삭제 (본인 작성)
  - 목록으로 돌아가기

### 갤러리 상세 (/community/gallery/[slug])
  - 갤러리 정보 조회
  - 게시글 목록 조회
    - 게시글 클릭 → 게시글 상세 (/community/post/[id])

### 예약 상세 (/bookings/[id])
  - 예약 정보 조회
  - 예약 수정 버튼
    - 클릭 → 예약 수정 (/bookings/[id]/edit)
      - 날짜 수정
      - 시간 수정
      - 주제 수정
      - 수정 제출
  - 예약 리뷰 작성 버튼
    - 클릭 → 리뷰 작성 (/bookings/[id]/review)
      - 평점 입력
      - 리뷰 내용 입력
      - 리뷰 제출
  - 예약 취소
  - 화상채팅 입장 (예약 시간 도래 시)
    - 클릭 → 화상채팅 (/call/[meetingId])

### 화상채팅 (/call/[meetingId])
  - 화상채팅 입장
  - 비디오 ON/OFF
  - 오디오 ON/OFF
  - 채팅 전송
  - 화상채팅 종료
    - 피드백 작성 (/feedback/[meetingId])
      - 피드백 제출

### 결제 플로우
  - 프로필 탭 → 포인트 충전 섹션
    - 쿠폰 패키지 선택 (1, 5, 10, 20 AKO)
    - 결제 페이지 이동 (/payments/checkout)
      - 결제 정보 입력
      - 결제 제출
        - 성공 → 결제 성공 페이지 (/payments/success)
        - 실패 → 결제 실패 메시지
        - 취소 → 결제 취소 페이지 (/payments/cancel)

### 인증센터 (/verification-center)
  - 인증 정보 입력
    - 이름 입력
    - 전화번호 입력
    - 대학/전공 입력 (학생)
    - 직업/회사 입력 (일반)
  - SMS 인증
    - 인증번호 입력
    - 인증 완료
  - 이메일 인증
    - 인증 링크 클릭
    - 인증 완료
  - 인증 제출
    - 성공 → 인증 완료 상태 업데이트
    - 실패 → 에러 메시지

### 기타 페이지
  - FAQ (/faq)
    - FAQ 목록 조회
    - FAQ 항목 클릭 → 답변 표시
  - 문의하기 (/inquiry)
    - 문의 폼 입력
    - 문의 제출
  - 제휴 문의 (/partnership)
    - 제휴 폼 입력
    - 제휴 제출
  - 약관 (/terms)
    - 약관 조회
  - 개인정보처리방침 (/privacy)
    - 개인정보처리방침 조회
  - 쿠키 정책 (/cookies)
    - 쿠키 정책 조회
  - 도움말 (/help)
    - 도움말 조회

---

## 공통 액션 (모든 화면에서 가능)

### 헤더 네비게이션
  - 로고 클릭 → 홈 탭 (/main?tab=home)
  - 홈 메뉴 → 홈 탭
  - 커뮤니티 메뉴 → 커뮤니티 탭 (/main?tab=community)
  - 화상채팅 메뉴 → 만남 탭 (/main?tab=meet)
  - 이벤트 메뉴 → 이벤트 탭 (/main?tab=event)
  - 언어 변경
    - 한국어 ↔ 스페인어 전환
  - 로그아웃 (로그인 시)
  - 인증완료 배지 (인증 완료 시)

### 하단 탭 네비게이션 (모바일)
  - 만남 탭 클릭 → /main?tab=meet
  - 커뮤니티 탭 클릭 → /main?tab=community
  - 홈 탭 클릭 → /main?tab=home
  - 이벤트 탭 클릭 → /main?tab=event
  - 프로필 탭 클릭 → /main?tab=me (비로그인 시 로그인 페이지로)

### 공통 기능
  - 스크롤 업 버튼
  - 채팅 버튼 (글로벌)
  - 알림 (있는 경우)

---

## 특수 케이스

### 인증 필요 액션
  - 게시글 작성 → (비인증 시) 인증센터로 안내
  - 댓글 작성 → (비인증 시) 인증센터로 안내
  - 예약 생성 → (비로그인 시) 로그인 페이지로
  - 포인트 충전 → (비로그인 시) 로그인 페이지로

### 운영자 전용
  - 관리자 대시보드 (/admin)
    - 사용자 관리
    - 예약 관리
    - 결제 관리
    - 뉴스 관리
    - 이벤트 관리
    - 문의 관리
    - 리포트 조회

### 에러 처리
  - 404 페이지 → 홈으로 이동
  - 에러 발생 → 에러 메시지 표시
  - 네트워크 오류 → 재시도 안내

---

## 플로우 요약

### 신규 사용자 플로우
앱 접속 → 회원가입 → 로그인 → 메인 앱 → 인증센터 → 인증 완료 → 게시글 작성/댓글 작성 가능

### 재방문 사용자 플로우
앱 접속 → 로그인 (또는 자동 로그인) → 메인 앱 → 출석 체크 (포인트 지급) → 활동 시작

### 게시글 작성 플로우
커뮤니티 탭 → 자유게시판 → 게시글 작성 버튼 → 작성 모달 → 제목/내용 입력 → 이미지 업로드 → 제출 → 게시글 목록 새로고침

### 댓글 작성 플로우
게시글 상세 → 댓글 입력란 포커스 → 댓글 입력 → 제출 → 댓글 목록 새로고침

### 퀴즈 플로우
커뮤니티 탭 → 퀴즈 목록 → 퀴즈 선택 → 시작 페이지 → 질문 진행 → 결과 페이지 → 공유/재응시

### 예약 플로우
만남 탭 → 상담사 선택 → 예약 생성 → 날짜/시간 선택 → 주제 입력 → 예약 요청 제출 → 예약 대기 → 예약 확정 → 화상채팅 입장

### 결제 플로우
프로필 탭 → 포인트 충전 섹션 → 쿠폰 패키지 선택 → 결제 페이지 → 결제 정보 입력 → 결제 제출 → 결제 완료

---

## ⚠️ 비활성화된 기능 (코드에는 있으나 현재 사용 안 함)

### Agora 비디오 콜
- **상태**: 비활성화 (`ENABLE_AGORA_VIDEO_CALL = false`)
- **대체**: 현재 Google Meet 사용 중
- **위치**: `src/components/video/VideoCall.tsx`

### 스토리 기능 (환경 변수 제어)
- **상태**: `NEXT_PUBLIC_ENABLE_STORIES` 환경 변수로 제어
- **기본값**: 활성화 (환경 변수가 'true'일 때만 표시)
- **위치**: `src/components/main/app/home/HomeTab.tsx`

---

## 📝 참고사항

### 메인 탭 구조
- 실제 메인 탭은 **5개**만 존재: `home`, `meet`, `community`, `event`, `me`
- `charging`은 메인 탭이 아니라 프로필 탭(`me`) 내부의 서브 기능입니다.

### 반응형 UI
- 일부 UI 요소는 `hidden` 클래스로 모바일/데스크톱에서 다르게 표시되지만, 이는 기능 비활성화가 아닌 반응형 디자인입니다.
